package module.signature.domain; 

class SignatureSystem {
	Integer queueMinutesLimit;
	Integer intentionMinutesLimit;
}

class SignatureQueue {
	DateTime expire;	
}

class SignatureIntention {
	String signObjectId;
	Boolean activated;
	String tokenIn;
	Boolean tokenInUsed; 
	String tokenOut;
	Boolean tokenOutUsed;
	DateTime expire;
	DateTime sealedDateTime;
}

class SignatureIntentionMulti extends SignatureIntention {
}

class SignatureIntentionObject extends SignatureIntention {
}

class SignatureIntentionActivity extends SignatureIntentionObject {
	String information;
}

class task.ClearExpiredSignatures extends .myorg.domain.scheduler.Task {
}

/*
 * File Repository 
 */
 
external class .pt.ist.fenixframework.plugins.fileSupport.domain.GenericFile;
 
class SignatureFile extends .pt.ist.fenixframework.plugins.fileSupport.domain.GenericFile { }

class SignatureRepository {}

relation MyOrgSignatureSystem {
	.myorg.domain.MyOrg playsRole myOrg;
	SignatureSystem playsRole signatureSystem;
}

relation SignatureSystemSignatureRepository {
	SignatureSystem playsRole signatureSystem;
	SignatureRepository playsRole signatureRepository;
}

relation SystemSignatureIntention {
	SignatureSystem playsRole signatureSystem;
	SignatureIntention playsRole signatureIntentions {
		multiplicity *;
	}
}

relation SignatureIntentionUser {
	.myorg.domain.User playsRole user;
	SignatureIntention playsRole signatureIntentions {
		multiplicity *;
	}
}

relation QueueUser {
	.myorg.domain.User playsRole user;
	SignatureQueue playsRole signatureQueue;
}

relation QueueSignIntention {
	SignatureQueue playsRole signatureQueue;
	SignatureIntention playsRole signatureIntentions {
		multiplicity *;
	}
}

relation SignIntentionMulti {
	SignatureIntentionMulti playsRole multi;
	SignatureIntention playsRole signatureIntentions {
		multiplicity *;
	}
}

relation SignatureRepositorySignatureFile {
	SignatureRepository playsRole repository;
	SignatureFile playsRole files {
		multiplicity *;
	}
}

relation SignatureFileSignatureIntention {
	SignatureFile playsRole signatureFile;
	SignatureIntention playsRole signature;
}
